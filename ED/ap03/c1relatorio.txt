c1.c - Relatório


Aluno: Rafael Martins Gomes


1. Analisando o código, é possível perceber que, no loop que se inicia na linha 7, há um acesso indevido da memória, visto que o vetor int *a foi dinamicamente alocado para ter 10 posições, e uma décima primeira é acessada.


2.
Script started on 2023-04-07 16:01:03-03:00 [TERM="xterm-256color" TTY="/dev/pts/3" COLUMNS="165" LINES="45"]

]0;rafaelmg@DESKTOP-R55VT5A: ~/Documents/ED/pa03 [01;32mrafaelmg@DESKTOP-R55VT5A[00m:[01;34m~/Documents/ED/pa03[00m$ valgrind --leak-check=full ./c1
==964== Memcheck, a memory error detector
==964== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==964== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info
==964== Command: ./c1
==964== 
==964== Invalid write of size 4
==964==    at 0x1091B8: main (c1.c:9)
==964==  Address 0x4a50068 is 0 bytes after a block of size 40 alloc'd
==964==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==964==    by 0x109185: main (c1.c:6)
==964== 
==964== 
==964== HEAP SUMMARY:
==964==     in use at exit: 0 bytes in 0 blocks
==964==   total heap usage: 1 allocs, 1 frees, 40 bytes allocated
==964== 
==964== All heap blocks were freed -- no leaks are possible
==964== 
==964== For lists of detected and suppressed errors, rerun with: -s
==964== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)
]0;rafaelmg@DESKTOP-R55VT5A: ~/Documents/ED/pa03 [01;32mrafaelmg@DESKTOP-R55VT5A[00m:[01;34m~/Documents/ED/pa03[00m$ exit
exit

Script done on 2023-04-07 16:01:24-03:00 [COMMAND_EXIT_CODE="0"]


3. Para remover o erro identificado, mudei o for antigo, que acessava a inexistente posição 11 do vetor (for (i = 0; i < 11; i++)). Agora, o loop vai até a décima posição do vetor (for (i = 0; i < 10; i++)).


4.
Script started on 2023-04-07 16:25:00-03:00 [TERM="xterm-256color" TTY="/dev/pts/3" COLUMNS="165" LINES="13"]

]0;rafaelmg@DESKTOP-R55VT5A: ~/Documents/ED/pa03 [01;32mrafaelmg@DESKTOP-R55VT5A[00m:[01;34m~/Documents/ED/pa03[00m$ valgrind --leak-ce[Kheck=full ,.[K[K./c1
==1427== Memcheck, a memory error detector
==1427== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==1427== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info
==1427== Command: ./c1
==1427== 
==1427== 
==1427== HEAP SUMMARY:
==1427==     in use at exit: 0 bytes in 0 blocks
==1427==   total heap usage: 1 allocs, 1 frees, 40 bytes allocated
==1427== 
==1427== All heap blocks were freed -- no leaks are possible
==1427== 
==1427== For lists of detected and suppressed errors, rerun with: -s
==1427== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
]0;rafaelmg@DESKTOP-R55VT5A: ~/Documents/ED/pa03 [01;32mrafaelmg@DESKTOP-R55VT5A[00m:[01;34m~/Documents/ED/pa03[00m$ script[K[K[K[K[K[Kexit
exit

Script done on 2023-04-07 16:26:31-03:00 [COMMAND_EXIT_CODE="0"]
